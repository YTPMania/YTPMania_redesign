define("discourse/plugins/discourse-reactions/discourse/adapters/discourse-reactions-adapter",["exports","discourse/adapters/rest"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class i extends t.default{basePath(){return"/discourse-reactions/"}}e.default=i})),define("discourse/plugins/discourse-reactions/discourse/adapters/discourse-reactions-custom-reaction",["exports","discourse/plugins/discourse-reactions/discourse/adapters/discourse-reactions-adapter"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class i extends t.default{pathFor(e,t,i){const s=this.basePath(e,t,i)+e.pluralize(this.apiNameFor(t))
return this.appendQueryParams(s,i)}apiNameFor(){return"custom-reaction"}}e.default=i})),define("discourse/plugins/discourse-reactions/discourse/components/discourse-reactions-reaction-post",["exports","@ember/component","@ember/template-factory","@glimmer/component","@ember/object/computed","discourse-common/lib/get-url","discourse/lib/text","@ember/service"],(function(e,t,i,s,o,r,n,a){"use strict"
var c,u,l,d
function p(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function h(e,t,i,s,o){var r={}
return Object.keys(s).forEach((function(e){r[e]=s[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,s){return s(e,t,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const m=(0,i.createTemplateFactory)({id:"nc1hgfvN",block:'[[[8,[39,0],null,[["@item"],[[28,[37,1],null,[["username","name","avatar_template","created_at","postUrl","category","title","expandedExcerpt","excerpt","topic_id","post_id","user_id"],[[30,1,["post_user","username"]],[30,1,["post_user","name"]],[30,1,["post_user","avatar_template"]],[30,1,["created_at"]],[30,0,["postUrl"]],[30,1,["category"]],[30,1,["topic","title"]],[30,1,["post","expandedExcerpt"]],[30,1,["post","excerpt"]],[30,1,["topic_id"]],[30,1,["post_id"]],[30,1,["user_id"]]]]]]],[["bottom"],[[[[1,"\\n"],[41,[30,1,["reaction","reaction_users_count"]],[[[1,"      "],[10,0],[14,0,"discourse-reactions-my-reaction"],[12],[1,"\\n        "],[10,"img"],[15,"src",[30,0,["emojiUrl"]]],[14,0,"reaction-emoji"],[12],[13],[1,"\\n        "],[10,3],[15,6,[30,1,["user","userUrl"]]],[15,"data-user-card",[30,1,["user","username"]]],[14,0,"avatar-link"],[12],[1,"\\n          "],[1,[28,[35,3],[[30,1,["user"]]],[["imageSize","extraClasses","ignoreTitle"],["tiny","actor","true"]]]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "]],[]]]]]],["@reaction"],false,["user-stream-item","hash","if","avatar"]]',moduleName:"discourse/plugins/discourse-reactions/discourse/components/discourse-reactions-reaction-post.hbs",isStrictMode:!1})
let f=(c=(0,o.equal)("args.reaction.post.post_type","site.post_types.moderator_action"),u=class extends s.default{constructor(){super(...arguments),p(this,"site",l,this),p(this,"moderatorAction",d,this)}get postUrl(){return(0,r.default)(this.args.reaction.post.url)}get emojiUrl(){const e=this.args.reaction.reaction.reaction_value
if(e)return(0,n.emojiUrlFor)(e)}},l=h(u.prototype,"site",[a.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h(u.prototype,"moderatorAction",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u)
e.default=f,(0,t.setComponentTemplate)(m,f)})),define("discourse/plugins/discourse-reactions/discourse/controllers/user-activity-reactions",["exports","@ember/controller","@ember/object","@ember/service","discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction","@glimmer/tracking"],(function(e,t,i,s,o,r){"use strict"
var n,a,c,u,l,d,p,h,m
function f(e,t,i,s){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function _(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function g(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance")
return i}function b(e,t,i,s,o){var r={}
return Object.keys(s).forEach((function(e){r[e]=s[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,s){return s(e,t,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let v=(h=new WeakSet,m=new WeakSet,n=class extends t.default{constructor(){super(...arguments),_(this,m),_(this,h),f(this,"siteSettings",a,this),f(this,"application",c,this),f(this,"canLoadMore",u,this),f(this,"loading",l,this),f(this,"beforeLikeId",d,this),f(this,"beforeReactionUserId",p,this),this.set("application.showFooter",!this.canLoadMore)}loadMore(){if(!this.canLoadMore||this.loading||!this.reactionsUrl)return void this.set("application.showFooter",!this.canLoadMore)
this.loading=!0
const e=this.model
this.beforeReactionUserId||g(this,m,k).call(this,e)
const t={actingUsername:this.actingUsername,includeLikes:this.includeLikes,beforeLikeId:this.beforeLikeId,beforeReactionUserId:this.beforeReactionUserId}
o.default.findReactions(this.reactionsUrl,this.username,t).then((t=>{e.addObjects(t),g(this,m,k).call(this,t),0===t.length&&(this.canLoadMore=!1)})).finally((()=>{this.loading=!1}))}},a=b(n.prototype,"siteSettings",[s.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=b(n.prototype,"application",[t.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=b(n.prototype,"canLoadMore",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=b(n.prototype,"loading",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=b(n.prototype,"beforeLikeId",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=b(n.prototype,"beforeReactionUserId",[r.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b(n.prototype,"loadMore",[i.action],Object.getOwnPropertyDescriptor(n.prototype,"loadMore"),n.prototype),n)
function y(e){return e.length?e[e.length-1].get("id"):null}function k(e){if(this.includeLikes){const t=this.siteSettings.discourse_reactions_reaction_for_like,[i,s]=e.reduce(((e,i)=>(i.reaction.reaction_value===t?e[0].push(i):e[1].push(i),e)),[[],[]])
this.beforeLikeId=g(this,h,y).call(this,i),this.beforeReactionUserId=g(this,h,y).call(this,s)}else this.beforeReactionUserId=g(this,h,y).call(this,e)}e.default=v})),define("discourse/plugins/discourse-reactions/discourse/discourse-reactions-user-activity-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t={resource:"user.userActivity",map(){this.route("reactions",{path:"reactions"})}}
e.default=t})),define("discourse/plugins/discourse-reactions/discourse/discourse-reactions-user-notifications-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t={resource:"user.userNotifications",map(){this.route("reactionsReceived",{path:"reactions-received"})}}
e.default=t})),define("discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction",["exports","discourse/lib/ajax","discourse/models/rest","discourse/models/topic","discourse/models/user","discourse/models/post","discourse/models/category","@ember/object"],(function(e,t,i,s,o,r,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const c=i.default.extend({init(){this._super(...arguments),this.__type="discourse-reactions-custom-reaction"}})
c.reopenClass({toggle:(e,i)=>(0,t.ajax)(`/discourse-reactions/posts/${e.id}/custom-reactions/${i}/toggle.json`,{type:"PUT"}).then((t=>{e.appEvents.trigger("discourse-reactions:reaction-toggled",{post:t,reaction:t.current_user_reaction})})),findReactions(e,i,c){const u={username:i}
return(c=c||{}).beforeReactionUserId&&(u.before_reaction_user_id=c.beforeReactionUserId),c.beforeLikeId&&(u.before_like_id=c.beforeLikeId),c.includeLikes&&(u.include_likes=c.includeLikes),c.actingUsername&&(u.acting_username=c.actingUsername),(0,t.ajax)(`/discourse-reactions/posts/${e}.json`,{data:u}).then((e=>e.map((e=>(e.user=o.default.create(e.user),e.topic=s.default.create(e.post.topic),e.post_user=o.default.create(e.post.user),e.category=n.default.findById(e.post.category_id),e.post=r.default.create(e.post),a.default.create(e))))))},findReactionUsers(e,i){const s={}
return(i=i||{}).reactionValue&&(s.reaction_value=i.reactionValue),(0,t.ajax)(`/discourse-reactions/posts/${e}/reactions-users.json`,{data:s})}})
var u=c
e.default=u})),define("discourse/plugins/discourse-reactions/discourse/routes/user-activity-reactions",["exports","discourse/routes/discourse","discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction"],(function(e,t,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class s extends t.default{model(){return i.default.findReactions("reactions",this.modelFor("user").get("username"))}setupController(e,t){let i=t.length<20
this.controllerFor("user-activity-reactions").setProperties({model:t,canLoadMore:!i,reactionsUrl:"reactions",username:this.modelFor("user").get("username")}),this.controllerFor("application").set("showFooter",i)}}e.default=s})),define("discourse/plugins/discourse-reactions/discourse/routes/user-notifications-reactions-received",["exports","discourse/routes/discourse","discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction"],(function(e,t,i){"use strict"
function s(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e
var i=e[Symbol.toPrimitive]
if(void 0!==i){var s=i.call(e,t||"default")
if("object"!=typeof s)return s
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string")
return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends t.default{constructor(){super(...arguments),s(this,"templateName","user-activity-reactions"),s(this,"controllerName","user-activity-reactions"),s(this,"queryParams",{acting_username:{refreshModel:!0},include_likes:{refreshModel:!0}})}model(e){return i.default.findReactions("reactions-received",this.modelFor("user").get("username"),{actingUsername:e.acting_username,includeLikes:e.include_likes})}setupController(e,t){let i=t.length<20
this.controllerFor("user-activity-reactions").setProperties({model:t,canLoadMore:!i,reactionsUrl:"reactions-received",username:this.modelFor("user").get("username"),actingUsername:e.acting_username,includeLikes:e.include_likes}),this.controllerFor("application").set("showFooter",i)}}e.default=o})),define("discourse/plugins/discourse-reactions/discourse/templates/connectors/user-activity-bottom/discourse-reactions-user-activity-reactions",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=(0,t.createTemplateFactory)({id:"NyNHIhlQ",block:'[[[41,[33,1,["discourse_reactions_enabled"]],[[[1,"  "],[8,[39,2],null,[["@route"],["userActivity.reactions"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,3],["far-smile"],null]],[1,"\\n    "],[10,1],[12],[1,[28,[35,4],["discourse_reactions.reactions_title"],null]],[13],[1,"\\n  "]],[]]]]],[1,"\\n"]],[]],null]],[],false,["if","siteSettings","link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-reactions/discourse/templates/connectors/user-activity-bottom/discourse-reactions-user-activity-reactions.hbs",isStrictMode:!1})
e.default=i})),define("discourse/plugins/discourse-reactions/discourse/templates/connectors/user-notifications-bottom/discourse-reactions-user-notification-reactions",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=(0,t.createTemplateFactory)({id:"IG6xf5eY",block:'[[[41,[33,1,["discourse_reactions_enabled"]],[[[1,"  "],[8,[39,2],null,[["@route"],["userNotifications.reactionsReceived"]],[["default"],[[[[1,"\\n    "],[1,[28,[35,3],["far-smile"],null]],[1,"\\n    "],[10,1],[12],[1,[28,[35,4],["discourse_reactions.reactions_title"],null]],[13],[1,"\\n  "]],[]]]]],[1,"\\n"]],[]],null]],[],false,["if","siteSettings","link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-reactions/discourse/templates/connectors/user-notifications-bottom/discourse-reactions-user-notification-reactions.hbs",isStrictMode:!1})
e.default=i})),define("discourse/plugins/discourse-reactions/discourse/templates/user-activity-reactions",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=(0,t.createTemplateFactory)({id:"ogsNsmF9",block:'[[[8,[39,0],null,[["@selector","@action"],[".user-stream-item",[28,[37,1],[[30,0],"loadMore"],null]]],[["default"],[[[[1,"\\n  "],[10,0],[14,0,"user-stream"],[12],[1,"\\n"],[42,[28,[37,3],[[28,[37,3],[[30,1]],null]],null],null,[[[1,"      "],[8,[39,4],null,[["@reaction"],[[30,2]]],null],[1,"\\n"]],[2]],[[[1,"      "],[10,0],[14,0,"alert alert-info"],[12],[1,[28,[35,5],["notifications.empty"],null]],[13],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n\\n  "],[8,[39,6],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n"]],[]]]]]],["@model","reaction"],false,["load-more","action","each","-track-array","discourse-reactions-reaction-post","i18n","conditional-loading-spinner"]]',moduleName:"discourse/plugins/discourse-reactions/discourse/templates/user-activity-reactions.hbs",isStrictMode:!1})
e.default=i})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-actions",["exports","@popperjs/core","discourse/lib/text","rsvp","@ember/runloop","discourse/widgets/widget","discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction","discourse-common/config/environment","I18n"],(function(e,t,i,s,o,r,n,a,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.resetCurrentReaction=function(){l=null}
let u,l
function d(e,t,s,o,r){if((0,a.isTesting)())return
const n=function(e){const t=document.createElement("img")
return t.src=(0,i.emojiUrlFor)(e),t.classList.add("btn-toggle-reaction-emoji","reaction-button","fake-reaction"),t}(t)
e.querySelector(".reaction-button").appendChild(n)
n.style.top=s,n.style.opacity=0,$(n).animate({top:o,opacity:1},{duration:350,complete:()=>{n.remove(),r()}},"swing")}function p(e,t,i,s){return(0,a.isTesting)()?(0,o.run)(this,s):$(e).stop().css("textIndent",t).animate({textIndent:i},{complete:s,step(e){$(this).css("transform",`scale(${e})`).addClass("far-heart").removeClass("heart")},duration:150},"linear")}var h=(0,r.createWidget)("discourse-reactions-actions",{tagName:"div.discourse-reactions-actions",services:["dialog"],defaultState:()=>({reactionsPickerExpanded:!1}),buildKey:e=>`discourse-reactions-actions-${e.post.id}-${e.position||"right"}`,buildClasses(e){if(!e.post.reactions)return
const t=e.post,i=t.reactions.length,s=t.current_user_reaction,o=[]
return t.reactions.length&&t.reactions.filter((e=>e.id!==this.siteSettings.discourse_reactions_reaction_for_like)).length&&o.push("custom-reaction-used"),t.yours&&o.push("my-post"),i&&o.push("has-reactions"),s&&o.push("has-reacted"),t.current_user_used_main_reaction&&o.push("has-used-main-reaction"),t.current_user_reaction&&!t.current_user_reaction.can_undo||!t.likeAction?.canToggle||o.push("can-toggle-reaction"),o},toggleReactions(e){this.state.reactionsPickerExpanded||(this.state.statePanelExpanded?this.scheduleExpand("expandReactionsPicker"):this.expandReactionsPicker(e))},touchStart(){if(this._validTouch=!0,(0,o.cancel)(this._touchTimeout),this.capabilities.touch){const e=document.getElementsByTagName("html")[0]
return e?.classList?.add("discourse-reactions-no-select"),this._touchStartAt=Date.now(),this._touchTimeout=(0,o.later)((()=>{this._touchStartAt=null,this.toggleReactions()}),400),!1}},touchMove(){this._validTouch=!1,(0,o.cancel)(this._touchTimeout)},touchEnd(e){if((0,o.cancel)(this._touchTimeout),!this._validTouch)return
const t=document.getElementsByTagName("html")[0]
if(t&&t.classList.remove("discourse-reactions-no-select"),this.capabilities.touch){if(e.originalEvent.changedTouches.length){const t=document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY)
if(t){const e=t.parentNode
if(t.classList.contains("pickable-reaction"))return void t.click()
if(e&&e.classList.contains("pickable-reaction"))return void e.click()}}const t=Date.now()-(this._touchStartAt||0)
this._touchStartAt=null,t>400?e.originalEvent&&e.originalEvent.target&&e.originalEvent.target.classList.contains("discourse-reactions-reaction-button")&&this.toggleReactions(e):e.target&&(e.target.classList.contains("discourse-reactions-reaction-button")||e.target.classList.contains("reaction-button"))&&this.toggleFromButton({reaction:this.attrs.post.current_user_reaction?this.attrs.post.current_user_reaction.id:this.siteSettings.discourse_reactions_reaction_for_like})}},toggle(e){if(!this.currentUser)return this.sendWidgetAction("showLogin")
if(!this.attrs.post.current_user_reaction||this.attrs.post.current_user_reaction.can_undo&&this.attrs.post.likeAction.canToggle){this.capabilities.canVibrate&&navigator.vibrate(5)
const t=document.querySelector(`[data-post-id="${e.postId}"] .discourse-reactions-picker .pickable-reaction.${CSS.escape(e.reaction)} .emoji`),i=[1,1.75]
return new s.Promise((s=>{p(t,i[0],i[1],(()=>{p(t,i[1],i[0],(()=>{const t=this.attrs.post,i=document.querySelector(`[data-post-id="${e.postId}"]`)
var r,a
t.current_user_reaction&&t.current_user_reaction.id===e.reaction?(this.toggleReaction(e),(0,o.later)((()=>{var o,r
o=i,r=e.reaction,d(o,r,"8px","42px",(()=>n.default.toggle(this.attrs.post,e.reaction).then(s).catch((e=>{this.dialog.alert(this._extractErrors(e)),this._rollbackState(t)}))))}),100)):(r=i,a=e.reaction,d(r,a,"-50px","8px",(()=>{this.toggleReaction(e),n.default.toggle(this.attrs.post,e.reaction).then(s).catch((e=>{this.dialog.alert(this._extractErrors(e)),this._rollbackState(t)}))})))}))}))})).finally((()=>{this.collapseAllPanels(),this.scheduleRerender()}))}},toggleReaction(e){if(this.collapseAllPanels(),this.attrs.post.current_user_reaction&&!this.attrs.post.current_user_reaction.can_undo&&!this.attrs.post.likeAction.canToggle)return
const t=this.attrs.post
if(t.current_user_reaction&&t.reactions.every(((e,i)=>e.count<=1&&e.id===t.current_user_reaction.id?(t.reactions.splice(i,1),!1):e.id!==t.current_user_reaction.id||(t.reactions[i].count-=1,!1))),!e.reaction||t.current_user_reaction&&e.reaction===t.current_user_reaction.id)t.reaction_users_count-=1,t.current_user_reaction=null
else{let i=!1
if(t.reactions.every(((s,o)=>s.id!==e.reaction||(t.reactions[o].count+=1,i=!0,!1))),!i){const i={id:e.reaction,type:"emoji",count:1},s=Object.assign([],t.reactions)
s.push(i)
const o=s.sort(((e,t)=>e.count>t.count?-1:e.count<t.count||e.id>t.id?1:e.id<t.id?-1:void 0)).indexOf(i)
t.reactions.splice(o,0,i)}t.current_user_reaction||(t.reaction_users_count+=1),t.current_user_reaction={id:e.reaction,type:"emoji",can_undo:!0}}t.current_user_reaction&&t.current_user_reaction.id===this.siteSettings.discourse_reactions_reaction_for_like?t.current_user_used_main_reaction=!0:t.current_user_used_main_reaction=!1},toggleFromButton(e){if(!this.currentUser)return this.sendWidgetAction("showLogin")
this.collapseAllPanels()
const t=this.siteSettings.discourse_reactions_reaction_for_like,i=this.attrs.post,o=i.current_user_reaction
if(i.likeAction&&!i.likeAction.canToggle&&!i.likeAction.can_undo)return
if(this.attrs.post.current_user_reaction&&!this.attrs.post.current_user_reaction.can_undo)return
if(!this.currentUser||i.user_id===this.currentUser.id)return
if(this.capabilities.canVibrate&&navigator.vibrate(5),o&&o.id===e.reaction)return this.toggleReaction(e),n.default.toggle(this.attrs.post,e.reaction).catch((e=>{this.dialog.alert(this._extractErrors(e)),this._rollbackState(i)}))
let r
r=i.reactions&&1===i.reactions.length&&i.reactions[0].id===t?`[data-post-id="${this.attrs.post.id}"] .discourse-reactions-double-button .discourse-reactions-reaction-button .d-icon`:e.reaction&&e.reaction!==t?`[data-post-id="${this.attrs.post.id}"] .discourse-reactions-reaction-button .reaction-button .btn-toggle-reaction-emoji`:`[data-post-id="${this.attrs.post.id}"] .discourse-reactions-reaction-button .d-icon`
const a=document.querySelector(r),c=[1,1.5]
return new s.Promise((s=>{p(a,c[0],c[1],(()=>{p(a,c[1],c[0],(()=>{this.toggleReaction(e)
let o=e.reaction&&e.reaction!==t?e.reaction:this.siteSettings.discourse_reactions_reaction_for_like
n.default.toggle(this.attrs.post,o).then(s).catch((e=>{this.dialog.alert(this._extractErrors(e)),this._rollbackState(i)}))}))}))}))},cancelCollapse(){(0,o.cancel)(this._collapseHandler)},cancelExpand(){(0,o.cancel)(this._expandHandler)},scheduleExpand(e){this.cancelExpand(),this._expandHandler=(0,o.later)(this,this[e],250)},scheduleCollapse(e){this.cancelCollapse(),this._collapseHandler=(0,o.later)(this,this[e],500)},buildId:e=>`discourse-reactions-actions-${e.post.id}-${e.position||"right"}`,clickOutside(){(this.state.reactionsPickerExpanded||this.state.statePanelExpanded)&&this.collapseAllPanels()},expandReactionsPicker(){(0,o.cancel)(this._collapseHandler),l?.collapseAllPanels(),this.state.statePanelExpanded=!1,this.state.reactionsPickerExpanded=!0,this.scheduleRerender(),this._setupPopper([".discourse-reactions-reaction-button",".discourse-reactions-picker"])},expandStatePanel(){(0,o.cancel)(this._collapseHandler),l?.collapseAllPanels(),this.state.statePanelExpanded=!0,this.state.reactionsPickerExpanded=!1,this.scheduleRerender(),this._setupPopper([".discourse-reactions-counter",".discourse-reactions-state-panel"])},collapseStatePanel(){(0,o.cancel)(this._collapseHandler),this._collapseHandler=null,this.state.statePanelExpanded=!1,this.scheduleRerender()},collapseReactionsPicker(){(0,o.cancel)(this._collapseHandler),this._collapseHandler=null,this.state.reactionsPickerExpanded=!1,this.scheduleRerender()},collapseAllPanels(){(0,o.cancel)(this._collapseHandler),this._collapseHandler=null,this.state.statePanelExpanded=!1,this.state.reactionsPickerExpanded=!1,this.scheduleRerender()},updatePopperPosition(){u?.update()},html(e){const t=e.post,i=[],s=this.siteSettings.discourse_reactions_reaction_for_like,o=Object.assign({},e,{reactionsPickerExpanded:this.state.reactionsPickerExpanded,statePanelExpanded:this.state.statePanelExpanded})
return this.currentUser&&t.user_id!==this.currentUser.id&&i.push(this.attach("discourse-reactions-picker",o)),"left"===e.position?(i.push(this.attach("discourse-reactions-counter",o)),i):(t.reactions&&1===t.reactions.length&&t.reactions[0].id===s?i.push(this.attach("discourse-reactions-double-button",o)):this.site.mobileView?t.yours?t.yours&&t.reactions&&t.reactions.length&&i.push(this.attach("discourse-reactions-counter",o)):(i.push(this.attach("discourse-reactions-counter",o)),i.push(this.attach("discourse-reactions-reaction-button",o))):t.yours||i.push(this.attach("discourse-reactions-reaction-button",o)),i)},_setupPopper(e){(0,o.schedule)("afterRender",(()=>{const t=this.attrs.position||"right",i=this.attrs.post.id,s=document.querySelector(`#discourse-reactions-actions-${i}-${t} ${e[0]}`),o=document.querySelector(`#discourse-reactions-actions-${i}-${t} ${e[1]}`)
u?.destroy(),u=this._applyPopper(s,o),l=this}))},_applyPopper:(e,i)=>(0,t.createPopper)(e,i,{placement:"top",modifiers:[{name:"offset",options:{offset:[0,-5]}},{name:"preventOverflow",options:{padding:5}}]}),_rollbackState(e){const t=e.current_user_reaction,i=e.current_user_used_main_reaction,s=Object.assign([],e.reactions),o=e.reaction_users_count
e.current_user_reaction=t,e.current_user_used_main_reaction=i,e.reactions=s,e.reaction_users_count=o,this.scheduleRerender()},_extractErrors(e){const t=e.xhr||e.jqXHR
return t&&t.status?429===t.status&&t.responseJSON&&t.responseJSON.errors&&t.responseJSON.errors[0]?t.responseJSON.errors[0]:403===t.status?c.default.t("discourse_reactions.reaction.forbidden"):c.default.t("errors.desc.unknown"):c.default.t("errors.desc.network")}})
e.default=h})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-counter",["exports","virtual-dom","discourse-common/lib/icon-library","discourse/widgets/widget","discourse/plugins/discourse-reactions/discourse/models/discourse-reactions-custom-reaction"],(function(e,t,i,s,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=(0,s.createWidget)("discourse-reactions-counter",{tagName:"div",buildKey:e=>`discourse-reactions-counter-${e.post.id}-${e.position||"right"}`,buildId:e=>`discourse-reactions-counter-${e.post.id}-${e.position||"right"}`,reactionsChanged(e){e.reactions.uniq().forEach((e=>{this.getUsers(e)}))},defaultState:()=>({reactionsUsers:{},statePanelExpanded:!1}),getUsers(e){return o.default.findReactionUsers(this.attrs.post.id,{reactionValue:e}).then((e=>{e.reaction_users.forEach((e=>{this.state.reactionsUsers[e.id]=e.users})),this.scheduleRerender(),this.callWidgetFunction("updatePopperPosition")}))},mouseDown:e=>(e.stopImmediatePropagation(),!1),mouseUp:e=>(e.stopImmediatePropagation(),!1),click(e){this.callWidgetFunction("cancelCollapse"),this.capabilities.touch&&this.site.mobileView||(e.stopPropagation(),e.preventDefault(),this.attrs.statePanelExpanded||this.getUsers(),this.toggleStatePanel(e))},clickOutside(){this.attrs.statePanelExpanded&&this.callWidgetFunction("collapseAllPanels")},touchStart(e){return this.callWidgetFunction("cancelCollapse"),!(!e.target.classList.contains("show-users")&&!e.target.classList.contains("avatar"))||(this.attrs.statePanelExpanded?(e.stopPropagation(),void e.preventDefault()):void(this.capabilities.touch&&(e.stopPropagation(),e.preventDefault(),this.getUsers(),this.toggleStatePanel(e))))},buildClasses(e){const t=[],i=this.siteSettings.discourse_reactions_reaction_for_like
return e.post.reactions&&1===e.post.reactions.length&&e.post.reactions[0].id===i&&t.push("only-like"),e.post.reaction_users_count>0&&t.push("discourse-reactions-counter"),t},html(e){if(e.post.reaction_users_count){const s=e.post,o=s.reaction_users_count
if(o<=0)return
const r=this.siteSettings.discourse_reactions_reaction_for_like,n=this.siteSettings.discourse_reactions_like_icon,a=[]
return a.push(this.attach("discourse-reactions-state-panel",Object.assign({},e,{reactionsUsers:this.state.reactionsUsers}))),1===s.reactions.length&&s.reactions[0].id===r||a.push(this.attach("discourse-reactions-list",{reactionsUsers:this.state.reactionsUsers,post:e.post})),a.push((0,t.h)("span.reactions-counter",o.toString())),s.yours&&s.reactions&&1===s.reactions.length&&s.reactions[0].id===r&&a.push((0,t.h)("div.discourse-reactions-reaction-button.my-likes",(0,t.h)("button.btn-toggle-reaction-like.btn-icon.no-text.reaction-button",[(0,i.iconNode)(`${n}`)]))),a}},toggleStatePanel(){this.attrs.statePanelExpanded?this.callWidgetFunction("collapseStatePanel"):this.callWidgetFunction("expandStatePanel")},mouseOver(){this.callWidgetFunction("cancelCollapse")},mouseOut(e){e.relatedTarget?.closest(`#${this.buildId(this.attrs)}`)||this.callWidgetFunction("scheduleCollapse","collapseStatePanel")}})
e.default=r})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-double-button",["exports","discourse/widgets/widget"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var i=(0,t.createWidget)("discourse-reactions-double-button",{tagName:"div.discourse-reactions-double-button",buildKey:e=>`discourse-reactions-double-button-${e.post.id}`,html(e){const t=[]
return e.post.reaction_users_count>0&&t.push(this.attach("discourse-reactions-counter",e)),e.post.yours||t.push(this.attach("discourse-reactions-reaction-button",e)),t}})
e.default=i})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-list-emoji",["exports","@popperjs/core","virtual-dom","discourse/widgets/raw-html","discourse/lib/text","discourse/widgets/widget","@ember/runloop","I18n"],(function(e,t,i,s,o,r,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let c
var u=(0,r.createWidget)("discourse-reactions-list-emoji",{tagName:"div.discourse-reactions-list-emoji",buildId:e=>`discourse-reactions-list-emoji-${e.post.id}-${e.reaction.id}`,mouseOver(){window.matchMedia("(hover: none)").matches||(this._setupPopper(".user-list"),this.attrs.users?.length||this.callWidgetFunction("getUsers",this.attrs.reaction.id))},html(e){if(e.reaction.count<=0)return
const t=e.reaction,r=e.users||[],n=[(0,i.h)("span.heading",e.reaction.id)]
r.length?(r.slice(0,19).forEach((e=>{let t
t=this.siteSettings.prioritize_username_in_ux?e.username:e.name?e.name:e.username,n.push((0,i.h)("span.username",t))})),e.reaction.count>19&&n.push((0,i.h)("span.other-users",a.default.t("discourse_reactions.state_panel.more_users",{count:e.reaction.count-19})))):n.push((0,i.h)("div.center",(0,i.h)("div.spinner.small")))
const c=[new s.default({html:(0,o.emojiUnescape)(`:${t.id}:`,{skipTitle:!0,class:this.siteSettings.discourse_reactions_desaturated_reaction_panel?"desaturated":""})})]
return window.matchMedia("(hover: none)").matches||c.push((0,i.h)("div.user-list",(0,i.h)("div.container",n))),c},_setupPopper(e){(0,n.schedule)("afterRender",(()=>{const i=CSS.escape(this.buildId(this.attrs)),s=document.querySelector(`#${i}`),o=document.querySelector(`#${i} ${e}`)
o&&(c&&c.destroy(),c=(0,t.createPopper)(s,o,{placement:"bottom",modifiers:[{name:"offset",options:{offset:[0,-5]}},{name:"preventOverflow",options:{padding:5}}]}))}))}})
e.default=u})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-list",["exports","virtual-dom","discourse/widgets/widget"],(function(e,t,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=(0,i.createWidget)("discourse-reactions-list",{tagName:"div.discourse-reactions-list",html(e){if(!(e.post.reaction_users_count<=0))return[(0,t.h)("div.reactions",e.post.reactions.map((t=>this.attach("discourse-reactions-list-emoji",{reaction:t,users:e.reactionsUsers[t.id],post:e.post}))))]}})
e.default=s})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-picker",["exports","discourse/widgets/raw-html","discourse/lib/text","virtual-dom","discourse/widgets/widget"],(function(e,t,i,s,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r=(0,o.createWidget)("discourse-reactions-picker",{tagName:"div.discourse-reactions-picker",buildKey:e=>`discourse-reactions-picker-${e.post.id}`,buildClasses(e){const t=[]
return e.reactionsPickerExpanded&&t.push("is-expanded"),t},mouseOut(){window.matchMedia("(hover: none)").matches||this.callWidgetFunction("scheduleCollapse","collapseReactionsPicker")},mouseOver(){window.matchMedia("(hover: none)").matches||this.callWidgetFunction("cancelCollapse")},html(e){if(e.reactionsPickerExpanded){const o=this.siteSettings.discourse_reactions_enabled_reactions.split("|").filter(Boolean)
o.includes(this.siteSettings.discourse_reactions_reaction_for_like)||o.unshift(this.siteSettings.discourse_reactions_reaction_for_like)
const r=e.post.current_user_reaction
return[(0,s.h)(`div.discourse-reactions-picker-container.col-${this._getOptimalColsCount(o.length)}`,o.map((s=>{let o,n,a,c
return o=s===this.siteSettings.discourse_reactions_reaction_for_like?e.post.current_user_used_main_reaction:r&&r.id===s,n=r?r.can_undo&&e.post.likeAction.canToggle:e.post.likeAction.canToggle,n?(a="discourse_reactions.picker.react_with",c={reaction:s}):a="discourse_reactions.picker.cant_remove_reaction",this.attach("button",{action:"toggle",data:{reaction:s},actionParam:{reaction:s,postId:e.post.id,canUndo:n},className:`pickable-reaction ${s} ${n?"can-undo":""} ${o?"is-used":""}`,title:a,titleOptions:c,contents:[new t.default({html:(0,i.emojiUnescape)(`:${s}:`)})]})})))]}},_getOptimalColsCount(e){let t
const i=[5,6,7,8]
if(e<i[0])return e
for(let s=0;s<i.length;++s){const o=i[s]
let r=e%o
if(0===r){t=o
break}(0===s||r>e%(o-1))&&(t=o)}return t}})
e.default=r})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-reaction-button",["exports","@ember/utils","I18n","discourse-common/lib/icon-library","discourse/lib/text","virtual-dom","discourse/widgets/widget"],(function(e,t,i,s,o,r,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var a=(0,n.createWidget)("discourse-reactions-reaction-button",{tagName:"div.discourse-reactions-reaction-button",buildKey:e=>`discourse-reactions-reaction-button-${e.post.id}`,click(){this.callWidgetFunction("cancelCollapse")
const e=this.attrs.post.current_user_reaction
this.capabilities.touch&&this.site.mobileView||this.callWidgetFunction("toggleFromButton",{reaction:e?e.id:this.siteSettings.discourse_reactions_reaction_for_like})},mouseOver(e){this.callWidgetFunction("cancelCollapse")
const i=this.attrs.post.likeAction,s=this.attrs.post.current_user_reaction;(!s||s.can_undo||i&&!(0,t.isBlank)(i.can_undo))&&(window.matchMedia("(hover: none)").matches||this.callWidgetFunction("toggleReactions",e))},mouseOut(){this.callWidgetFunction("cancelExpand"),window.matchMedia("(hover: none)").matches||this.callWidgetFunction("scheduleCollapse","collapseReactionsPicker")},buildAttributes(e){const s=e.post.likeAction
if(!s)return{}
let o,r
const n=this.attrs.post.current_user_reaction
return s.canToggle&&(0,t.isBlank)(s.can_undo)&&(o="discourse_reactions.main_reaction.add"),s.canToggle&&s.can_undo&&(o="discourse_reactions.main_reaction.remove"),s.canToggle||(o="discourse_reactions.main_reaction.cant_remove"),n&&n.can_undo&&(0,t.isBlank)(s.can_undo)&&(o="discourse_reactions.picker.remove_reaction",r={reaction:n.id}),n&&!n.can_undo&&(0,t.isBlank)(s.can_undo)&&(o="discourse_reactions.picker.cant_remove_reaction"),r?{title:i.default.t(o,r)}:{title:i.default.t(o)}},html(e){const t=this.siteSettings.discourse_reactions_like_icon,i=e.post.current_user_used_main_reaction,n=e.post.current_user_reaction
return i?(0,r.h)("button.btn-toggle-reaction-like.btn-icon.no-text.reaction-button",{title:this.buildAttributes(e).title},[(0,s.iconNode)(t)]):n?(0,r.h)("button.btn-icon.no-text.reaction-button",{title:this.buildAttributes(e).title},(0,r.h)("img.btn-toggle-reaction-emoji.reaction-button",{src:(0,o.emojiUrlFor)(n.id),alt:`:${n.id}:`})):(0,r.h)("button.btn-toggle-reaction-like.btn-icon.no-text.reaction-button",{title:this.buildAttributes(e).title},[(0,s.iconNode)(`far-${t}`)])}})
e.default=a})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-reaction-notification-item",["discourse/widgets/widget","discourse/widgets/default-notification-item","discourse-common/lib/icon-library","discourse/lib/utilities","discourse/lib/url","I18n"],(function(e,t,i,s,o,r){"use strict";(0,e.createWidgetFrom)(t.DefaultNotificationItem,"reaction-notification-item",{notificationTitle:()=>r.default.t("notifications.titles.reaction"),icon(e){let t,s=this.attrs.data.reaction_icon
return t=s?(0,i.iconNode)(s):(0,i.iconNode)(`notification.${e}`),t},text(e,t){const i=t.count,o=(0,s.formatUsername)(t.display_username)
if(t.username2){const e=i-2,n=0===e?"reaction_2":"reaction_many"
return r.default.t(`notifications.${n}`,{username:o,username2:(0,s.formatUsername)(t.username2),description:this.attrs.fancy_title,count:e})}return i&&1!==i?r.default.t("notifications.reaction.multiple",{username:(0,s.formatUsername)(t.display_username),count:i}):r.default.t("notifications.reaction.single",{username:(0,s.formatUsername)(t.display_username),description:this.attrs.fancy_title})},url(){const e=this.attrs.topic_id
if(e)return(0,s.postUrl)(this.attrs.slug,e,this.attrs.post_number)
{const e=this.attrs.data
let t="reactions-received"
return e.reaction_icon&&(t="likes-received"),(0,o.userPath)(`${this.currentUser.username}/notifications/${t}?acting_username=${e.display_username}&include_likes=true`)}}})})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-state-panel-reaction",["exports","I18n","discourse/widgets/raw-html","discourse/lib/text","virtual-dom","discourse/widgets/widget","discourse/widgets/post","discourse-common/lib/icon-library"],(function(e,t,i,s,o,r,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var c=(0,r.createWidget)("discourse-reactions-state-panel-reaction",{tagName:"div.discourse-reactions-state-panel-reaction",buildClasses(e){if(e.isDisplayed)return"is-displayed"},click(e){e?.target?.classList?.contains("show-users")&&(e.preventDefault(),e.stopPropagation(),this.sendWidgetAction("showUsers",this.attrs?.reaction?.id))},html(e){const r=[]
if(!e.users)return
r.push((0,o.h)("div.reaction-wrapper",[(0,o.h)("div.emoji-wrapper",[new i.default({html:(0,s.emojiUnescape)(`:${e.reaction.id}:`)})]),(0,o.h)("div.count",e.reaction.count.toString())]))
const c=e.users.slice(0,8),u=c.map((e=>(0,n.avatarFor)("tiny",{username:e.username,template:e.avatar_template})))
let l
e.users.length>8&&u.push((0,o.h)("button.show-users",(0,a.iconNode)(e.isDisplayed?"chevron-up":"chevron-down"))),e.isDisplayed&&u.push(e.users.slice(8,26).map((e=>(0,n.avatarFor)("tiny",{username:e.username,template:e.avatar_template})))),e.isDisplayed&&e.reaction.count>26&&(l=t.default.t("discourse_reactions.state_panel.more_users",{count:e.reaction.count-26}))
const d=e.users.length>8?c.length+1:c.length
return r.push((0,o.h)("div.users",[(0,o.h)(`div.list.list-columns-${d}`,u),(0,o.h)("span.more",l)])),r}})
e.default=c})),define("discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-state-panel",["exports","virtual-dom","discourse/widgets/widget"],(function(e,t,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var s=(0,i.createWidget)("discourse-reactions-state-panel",{tagName:"div.discourse-reactions-state-panel",buildKey:e=>`discourse-reactions-state-panel-${e.post.id}`,buildClasses(e){const t=[]
if(e.post&&e.post.reactions){const i=Math.max(...e.post.reactions.mapBy("count")).toString().length
t.push(`max-length-${i}`)}return e.statePanelExpanded&&t.push("is-expanded"),t},mouseOut(){window.matchMedia("(hover: none)").matches||this.callWidgetFunction("scheduleCollapse","collapseStatePanel")},mouseOver(){window.matchMedia("(hover: none)").matches||this.callWidgetFunction("cancelCollapse")},showUsers(e){this.state.displayedReactionId?this.state.displayedReactionId===e?this.hideUsers():this.state.displayedReactionId!==e&&(this.state.displayedReactionId=e):this.state.displayedReactionId=e},hideUsers(){this.state.displayedReactionId=null},defaultState:()=>({displayedReactionId:null}),html(e){if(!e.statePanelExpanded||!e.post.reactions.length)return
const i=Object.keys(e.reactionsUsers).length?(0,t.h)("div.counters",e.post.reactions.map((t=>this.attach("discourse-reactions-state-panel-reaction",{reaction:t,users:e.reactionsUsers[t.id],post:e.post,isDisplayed:t.id===this.state.displayedReactionId})))):(0,t.h)("div.spinner-container",(0,t.h)("div.spinner.small"))
return(0,t.h)("div.container",i)}})
e.default=s})),define("discourse/plugins/discourse-reactions/initializers/discourse-reactions",["exports","discourse/plugins/discourse-reactions/discourse/widgets/discourse-reactions-actions","discourse/lib/plugin-api","discourse-common/lib/icon-library","discourse/lib/text","discourse/lib/url","discourse/lib/utilities","I18n"],(function(e,t,i,s,o,r,n,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const c="discourse-reactions"
function u(e){e.replacePostMenuButton("like",{name:"discourse-reactions-actions",buildAttrs:e=>({post:e.findAncestorModel()}),shouldRender:e=>{const t=e.findAncestorModel()
return t&&!t.deleted_at}}),e.addKeyboardShortcut("l",null,{click:".topic-post.selected .discourse-reactions-reaction-button"}),e.modifyClass("component:scrolling-post-stream",{pluginId:c,didInsertElement(){this._super(...arguments)
const e=this?.posts?.firstObject?.topic_id
e&&this.messageBus.subscribe(`/topic/${e}/reactions`,(e=>{this.dirtyKeys.keyDirty(`discourse-reactions-counter-${e.post_id}`,{onRefresh:"reactionsChanged",refreshArg:e}),this._refresh({id:e.post_id})}))}}),e.modifyClass("controller:topic",{pluginId:c,unsubscribe(){this._super(...arguments)
const e=this.model.id
e&&this.messageBus.unsubscribe(`/topic/${e}/reactions`)}}),e.decorateWidget("post-menu:extra-post-controls",(e=>{if(e.widget.site.mobileView)return
const t=e.widget.siteSettings.discourse_reactions_reaction_for_like,i=e.getModel()
return!i||i.deleted_at||i.reactions&&1===i.reactions.length&&i.reactions[0].id===t?void 0:e.attach("discourse-reactions-actions",{post:i,position:"left"})})),e.modifyClass("component:emoji-value-list",{pluginId:c,didReceiveAttrs(){if(this._super(...arguments),"discourse_reactions_enabled_reactions"!==this.setting.setting)return
if(this.values.includes(this.siteSettings.discourse_reactions_reaction_for_like)){const e=this.collection.findBy("value",this.siteSettings.discourse_reactions_reaction_for_like)
e&&(e.isEditable=!1)}else this.collection.unshiftObject({emojiUrl:(0,o.emojiUrlFor)(this.siteSettings.discourse_reactions_reaction_for_like),isEditable:!1,isEditing:!1,value:this.siteSettings.discourse_reactions_reaction_for_like})}},{ignoreMissing:!0}),e.replaceIcon("notification.reaction","discourse-emojis"),e.registerNotificationTypeRenderer&&e.registerNotificationTypeRenderer("reaction",(e=>class extends e{get linkTitle(){return a.default.t("notifications.titles.reaction")}get linkHref(){const e=super.linkHref
if(e)return e
let t="reactions-received"
return this.notification.data.reaction_icon&&(t="likes-received"),(0,r.userPath)(`${this.currentUser.username}/notifications/${t}?acting_username=${this.notification.data.display_username}&include_likes=true`)}get icon(){return this.notification.data.reaction_icon||`notification.${this.notificationName}`}get label(){const e=this.notification.data.count,t=this.username
return e&&1!==e&&this.notification.data.username2?e>2?a.default.t("notifications.reaction_2_users_with_others",{username:t,username2:(0,n.formatUsername)(this.notification.data.username2),count:e-2}):a.default.t("notifications.reaction_2_users",{username:t,username2:(0,n.formatUsername)(this.notification.data.username2)}):t}get labelClasses(){if(this.notification.data.username2)return this.notification.data.count>2?["multi-user"]:["double-user"]}get description(){return this.notification.data.count>1&&!this.notification.data.username2?a.default.t("notifications.reaction_1_user_multiple_posts",{count:this.notification.data.count}):super.description}}))}(0,s.replaceIcon)("notification.reaction","bell")
var l={name:"discourse-reactions",initialize(e){e.lookup("site-settings:main").discourse_reactions_enabled&&(0,i.withPluginApi)("0.10.1",u)},teardown(){(0,t.resetCurrentReaction)()}}
e.default=l}))

//# sourceMappingURL=discourse-reactions-6e8c7ebcd423dcfc985ee7e184728f176c3e9fb852af95378768ed7407f22a96.map
//!

;
