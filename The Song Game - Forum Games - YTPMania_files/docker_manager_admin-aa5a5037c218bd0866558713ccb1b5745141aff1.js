define("discourse/plugins/docker_manager/discourse/components/docker-manager/console",["exports","@ember/component","@ember/template-factory","@glimmer/component","discourse-common/utils/decorators"],(function(e,r,t,i,n){"use strict"
var a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const o=(0,t.createTemplateFactory)({id:"E4gmFwOC",block:'[[[11,0],[24,0,"console-logs"],[4,[38,0],[[30,0,["scrollToBottom"]]],null],[4,[38,1],[[30,0,["scrollToBottom"]],[30,1]],null],[12],[1,[30,1]],[13]],["@output"],false,["did-insert","did-update"]]',moduleName:"discourse/plugins/docker_manager/discourse/components/docker-manager/console.hbs",isStrictMode:!1})
let l=(a=class extends i.default{scrollToBottom(e){this.args.followOutput&&(e.scrollTop=e.scrollHeight)}},s=a.prototype,u="scrollToBottom",d=[n.bind],c=Object.getOwnPropertyDescriptor(a.prototype,"scrollToBottom"),p=a.prototype,g={},Object.keys(c).forEach((function(e){g[e]=c[e]})),g.enumerable=!!g.enumerable,g.configurable=!!g.configurable,("value"in g||g.initializer)&&(g.writable=!0),g=d.slice().reverse().reduce((function(e,r){return r(s,u,e)||e}),g),p&&void 0!==g.initializer&&(g.value=g.initializer?g.initializer.call(p):void 0,g.initializer=void 0),void 0===g.initializer&&(Object.defineProperty(s,u,g),g=null),a)
var s,u,d,c,p,g
e.default=l,(0,r.setComponentTemplate)(o,l)})),define("discourse/plugins/docker_manager/discourse/components/docker-manager/progress-bar",["exports","@ember/component","@ember/template-factory","@glimmer/component","@ember/template"],(function(e,r,t,i,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const a=(0,t.createTemplateFactory)({id:"uEtfDzBs",block:'[[[10,0],[15,0,[29,["progress-bar ",[52,[30,0,["active"]],"active"]]]],[12],[1,"\\n  "],[10,0],[14,0,"progress-bar-inner"],[15,5,[30,0,["barStyle"]]],[12],[13],[1,"\\n"],[13]],[],false,["if"]]',moduleName:"discourse/plugins/docker_manager/discourse/components/docker-manager/progress-bar.hbs",isStrictMode:!1})
class o extends i.default{get active(){return 100!==parseInt(this.args.percent,10)}get barStyle(){let e=parseInt(this.args.percent,10)
return e>100&&(e=100),(0,n.htmlSafe)(`width: ${e}%`)}}e.default=o,(0,r.setComponentTemplate)(a,o)})),define("discourse/plugins/docker_manager/discourse/components/docker-manager/repo-status",["exports","@ember/component","@ember/template-factory","@glimmer/component","@ember/service","@ember/object","I18n"],(function(e,r,t,i,n,a,o){"use strict"
var l,s,u
function d(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function c(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const p=(0,t.createTemplateFactory)({id:"DjayAwPe",block:'[[[10,"tr"],[12],[1,"\\n  "],[10,"td"],[12],[1,"\\n"],[41,[30,0,["officialRepoBadge"]],[[[1,"      "],[1,[28,[35,1],[[30,0,["officialRepoBadge"]]],[["class","translatedTitle"],["check-circle",[30,0,["officialRepoBadgeTitle"]]]]]],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n\\n  "],[10,"td"],[12],[1,"\\n    "],[10,3],[15,6,[30,1,["url"]]],[12],[1,[30,1,["name"]]],[13],[1,"\\n    "],[10,1],[14,0,"current commit-hash"],[15,"title",[30,1,["version"]]],[12],[1,"\\n      "],[1,[30,1,["prettyVersion"]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,"td"],[12],[1,"\\n"],[41,[30,1,["checkingStatus"]],[[[1,"      "],[1,[28,[35,2],["admin.docker.checking"],null]],[1,"\\n"]],[]],[[[41,[30,1,["upToDate"]],[[[1,"      "],[1,[28,[35,2],["admin.docker.up_to_date"],null]],[1,"\\n"]],[]],[[[1,"      "],[10,0],[14,0,"new-version"],[12],[1,"\\n        "],[10,"h4"],[12],[1,[28,[35,2],["admin.docker.new_version_available"],null]],[13],[1,"\\n\\n        "],[10,"ul"],[12],[1,"\\n          "],[10,"li"],[12],[1,"\\n            "],[1,[28,[35,2],["admin.docker.latest_version"],null]],[1,"\\n            "],[10,1],[14,0,"new commit-hash"],[15,"title",[30,1,["latestVersion"]]],[12],[1,"\\n              "],[1,[30,1,["prettyLatestVersion"]]],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"li"],[12],[1,"\\n            "],[1,[28,[35,2],["admin.docker.last_updated"],null]],[1,"\\n"],[41,[30,1,["latest","date"]],[[[1,"              "],[1,[28,[35,3],[[30,1,["latest","date"]]],null]],[1,"\\n"]],[]],[[[1,"              â€”\\n"]],[]]],[1,"          "],[13],[1,"\\n          "],[10,"li"],[14,0,"new-commits"],[12],[1,"\\n            "],[1,[28,[35,4],[[30,1,["latest","commits_behind"]],[30,1,["version"]],[30,1,["latest","version"]],[30,1,["url"]]],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[8,[39,5],null,[["@action","@disabled","@class","@translatedLabel"],[[30,0,["upgrade"]],[30,0,["upgradeDisabled"]],"upgrade-button",[30,0,["upgradeButtonLabel"]]]],null],[1,"\\n      "],[13],[1,"\\n    "]],[]]]],[]]],[1,"  "],[13],[1,"\\n"],[13]],["@repo"],false,["if","d-icon","i18n","format-date","new-commits","d-button"]]',moduleName:"discourse/plugins/docker_manager/discourse/components/docker-manager/repo-status.hbs",isStrictMode:!1})
let g=(l=class extends i.default{constructor(){super(...arguments),d(this,"router",s,this),d(this,"upgradeStore",u,this)}get upgradeDisabled(){return!this.args.upgradingRepo&&(!!this.upgradeStore.running||!this.args.managerRepo.upToDate&&this.args.managerRepo!==this.args.repo)}get officialRepoBadge(){return this.args.repo.fork?"exclamation-circle":this.args.repo.official?"check-circle":void 0}get officialRepoBadgeTitle(){return this.args.repo.fork?o.default.t("admin.docker.forked_plugin"):this.args.repo.official?o.default.t("admin.docker.official_plugin"):void 0}get upgradeButtonLabel(){return this.args.repo.upgrading?o.default.t("admin.docker.upgrading"):o.default.t("admin.docker.upgrade_action")}upgrade(){this.router.transitionTo("upgrade.show",this.args.repo)}},s=c(l.prototype,"router",[n.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c(l.prototype,"upgradeStore",[n.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c(l.prototype,"upgrade",[a.action],Object.getOwnPropertyDescriptor(l.prototype,"upgrade"),l.prototype),l)
e.default=g,(0,r.setComponentTemplate)(p,g)})),define("discourse/plugins/docker_manager/discourse/components/docker-manager/upgrade-notice",["exports","@ember/component","@ember/template-factory","@glimmer/component","@ember/service"],(function(e,r,t,i,n){"use strict"
var a,o
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,t.createTemplateFactory)({id:"RlHoQw+/",block:'[[[41,[30,0,["currentUser","admin"]],[[[41,[51,[30,1,["upToDate"]]],[[[1,"    "],[10,0],[14,0,"upgrades-banner"],[12],[1,"\\n      "],[1,[28,[35,2],["admin.docker.outdated_notice"],null]],[1,"\\n\\n      "],[8,[39,3],null,[["@route"],["upgrade"]],[["default"],[[[[1,"\\n        "],[1,[28,[35,2],["admin.docker.perform_upgrade"],null]],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n"]],[]],null]],[]],null]],["@versionCheck"],false,["if","unless","i18n","link-to"]]',moduleName:"discourse/plugins/docker_manager/discourse/components/docker-manager/upgrade-notice.hbs",isStrictMode:!1})
let s=(a=class extends i.default{constructor(){var e,r,t,i
super(...arguments),e=this,r="currentUser",i=this,(t=o)&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}},u=a.prototype,d="currentUser",c=[n.inject],p={configurable:!0,enumerable:!0,writable:!0,initializer:null},f={},Object.keys(p).forEach((function(e){f[e]=p[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce((function(e,r){return r(u,d,e)||e}),f),g&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(g):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(u,d,f),f=null),o=f,a)
var u,d,c,p,g,f
e.default=s,(0,r.setComponentTemplate)(l,s)})),define("discourse/plugins/docker_manager/discourse/controllers/upgrade-index",["exports","@ember/controller","@ember/service","@glimmer/tracking","@ember/object","discourse/plugins/docker_manager/discourse/models/repo"],(function(e,r,t,i,n,a){"use strict"
var o,l
function s(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let u=(o=class extends r.default{constructor(){var e,r,t,i
super(...arguments),e=this,r="router",i=this,(t=l)&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}get managerRepo(){return this.model.find((e=>"docker_manager"===e.id))}get outdated(){return a.needsImageUpgrade}get upgradeAllButtonDisabled(){return!this.managerRepo.upToDate||this.allUpToDate}get allUpToDate(){return this.model.every((e=>e.upToDate))}upgradeAllButton(){this.router.transitionTo("upgrade.show","all")}},l=s(o.prototype,"router",[t.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s(o.prototype,"managerRepo",[i.cached],Object.getOwnPropertyDescriptor(o.prototype,"managerRepo"),o.prototype),s(o.prototype,"upgradeAllButton",[n.action],Object.getOwnPropertyDescriptor(o.prototype,"upgradeAllButton"),o.prototype),o)
e.default=u})),define("discourse/plugins/docker_manager/discourse/controllers/upgrade-show",["exports","discourse/plugins/docker_manager/discourse/models/repo","@ember/controller","@ember/service","@ember/object","I18n","discourse-common/lib/helpers"],(function(e,r,t,i,n,a,o){"use strict"
var l,s,u,d
function c(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function p(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let g=(l=class extends t.default{constructor(){super(...arguments),c(this,"messageBus",s,this),c(this,"dialog",u,this),c(this,"upgradeStore",d,this)}get complete(){return"complete"===this.upgradeStore.upgradeStatus}get failed(){return"failed"===this.upgradeStore.upgradeStatus}get multiUpgrade(){return this.model.length>1}get title(){return this.multiUpgrade?a.default.t("admin.docker.upgrade_everything"):a.default.t("admin.docker.upgrade_repo",{name:this.model.name})}get isUpToDate(){return(0,o.makeArray)(this.model).every((e=>e.upToDate))}get upgrading(){return(0,o.makeArray)(this.model).some((e=>e.upgrading))}start(){if(this.upgradeStore.reset(),this.multiUpgrade){for(const e of this.model)e.upToDate||(e.upgrading=!0)
return r.default.upgradeAll()}if(!this.model.upgrading)return this.model.startUpgrade()}resetUpgrade(){this.dialog.confirm({message:a.default.t("admin.docker.reset_warning"),didConfirm:async()=>{if(this.multiUpgrade)try{await r.default.resetAll(this.model.filter((e=>!e.upToDate)))}finally{this.upgradeStore.reset()
for(const e of this.model)e.upgrading=!1
return}await this.model.resetUpgrade(),this.upgradeStore.reset()}})}},s=p(l.prototype,"messageBus",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=p(l.prototype,"dialog",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=p(l.prototype,"upgradeStore",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p(l.prototype,"start",[n.action],Object.getOwnPropertyDescriptor(l.prototype,"start"),l.prototype),p(l.prototype,"resetUpgrade",[n.action],Object.getOwnPropertyDescriptor(l.prototype,"resetUpgrade"),l.prototype),l)
e.default=g})),define("discourse/plugins/docker_manager/discourse/controllers/upgrade",["exports","@ember/controller","@glimmer/tracking","@ember/object","@ember-compat/tracked-built-ins"],(function(e,r,t,i,n){"use strict"
var a,o,l
function s(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function u(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let d=(a=class extends r.default{constructor(){super(...arguments),s(this,"banner",o,this),s(this,"bannerDismissed",l,this)}get showBanner(){return!this.bannerDismissed&&this.banner?.length>0}appendBannerHtml(e){this.banner.includes(e)||this.banner.push(e)}dismiss(){this.bannerDismissed=!0}},o=u(a.prototype,"banner",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n.TrackedArray([])}}),l=u(a.prototype,"bannerDismissed",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u(a.prototype,"dismiss",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"dismiss"),a.prototype),a)
e.default=d})),define("discourse/plugins/docker_manager/discourse/docker-manager-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var r={resource:"admin",map(){this.route("upgrade",{resetNamespace:!0,path:"upgrade"},(function(){this.route("processes"),this.route("show",{path:"/:id"})}))}}
e.default=r})),define("discourse/plugins/docker_manager/discourse/helpers/new-commits",["exports","@ember/component/helper","@ember/template","I18n"],(function(e,r,t,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var n=(0,r.helper)((function(e){const[r,n,a,o]=e
if(!r)return""
if(0===parseInt(r,10))return""
let l=i.default.t("admin.docker.commits",{count:r})
if(!o)return l
return l=`<a href='${o.substr(0,o.search(/(\.git)?$/))}/compare/${n}...${a}'>${l}</a>`,new t.htmlSafe(l)}))
e.default=n})),define("discourse/plugins/docker_manager/discourse/models/process-list",["exports","discourse/lib/ajax","@glimmer/tracking"],(function(e,r,t){"use strict"
var i,n
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let a=(i=class{constructor(){var e,r,t,i
e=this,r="output",i=this,(t=n)&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}async refresh(){const e=await(0,r.ajax)("/admin/docker/ps",{dataType:"text"})
this.output=e}},o=i.prototype,l="output",s=[t.tracked],u={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}},c={},Object.keys(u).forEach((function(e){c[e]=u[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=s.slice().reverse().reduce((function(e,r){return r(o,l,e)||e}),c),d&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(d):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(o,l,c),c=null),n=c,i)
var o,l,s,u,d,c
e.default=a})),define("discourse/plugins/docker_manager/discourse/models/repo",["exports","discourse/lib/ajax","@glimmer/tracking","@ember-compat/tracked-built-ins"],(function(e,r,t,i){"use strict"
var n,a,o,l,s,u,d,c,p,g,f,m,b,h,v
function y(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function k(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.needsImageUpgrade=e.default=void 0
let w=[],z=!1
function _(e){return e.map((e=>e.version)).join(", ")}e.needsImageUpgrade=z
let j=(n=class t{static create(){return new t(...arguments)}static async findAll(){if(w.length)return w
const i=await(0,r.ajax)("/admin/docker/repos")
return w=i.repos.map((e=>new t(e))),e.needsImageUpgrade=z=i.upgrade_required,w}static async findUpgrading(){return(await t.findAll()).findBy("upgrading",!0)}static async find(e){return(await t.findAll()).findBy("id",e)}static upgradeAll(){return(0,r.ajax)("/admin/docker/upgrade",{dataType:"text",type:"POST",data:{path:"all"}})}static resetAll(e){return(0,r.ajax)("/admin/docker/upgrade",{dataType:"text",type:"DELETE",data:{path:"all",version:_(e)}})}static async findLatestAll(){return(await(0,r.ajax)("/admin/docker/latest",{dataType:"json",type:"GET",data:{path:"all"}})).repos}static async findAllProgress(e){return(await(0,r.ajax)("/admin/docker/progress",{dataType:"json",type:"GET",data:{path:"all",version:_(e)}})).progress}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
if(y(this,"unloaded",a,this),y(this,"checking",o,this),y(this,"lastCheckedAt",l,this),y(this,"latest",s,this),y(this,"name",u,this),y(this,"path",d,this),y(this,"branch",c,this),y(this,"official",p,this),y(this,"fork",g,this),y(this,"id",f,this),y(this,"version",m,this),y(this,"pretty_version",b,this),y(this,"url",h,this),y(this,"upgrading",v,this),e.latest)for(const[r,t]of Object.entries(e.latest))this.latest[r]=t
for(const[r,t]of Object.entries(e))"latest"!==r&&(this[r]=t)}get checkingStatus(){return this.unloaded||this.checking}get upToDate(){return!this.upgrading&&this.version===this.latest?.version}get prettyVersion(){return this.pretty_version||this.version?.substring(0,8)}get prettyLatestVersion(){return this.latest?.pretty_version||this.latest?.version?.substring(0,8)}get shouldCheck(){if(null===this.version)return!1
if(this.checking)return!1
if(this.lastCheckedAt){return(new Date).getTime()-this.lastCheckedAt>6e4}return!0}repoAjax(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
return t.data={path:this.path,version:this.version,branch:this.branch},(0,r.ajax)(e,t)}async findLatest(){if(!this.shouldCheck)return void(this.unloaded=!1)
this.checking=!0
const e=await this.repoAjax("/admin/docker/latest")
this.unloaded=!1,this.checking=!1,this.lastCheckedAt=(new Date).getTime()
for(const[r,t]of Object.entries(e.latest))this.latest[r]=t}async findProgress(){return(await this.repoAjax("/admin/docker/progress")).progress}async resetUpgrade(){await this.repoAjax("/admin/docker/upgrade",{dataType:"text",type:"DELETE"}),this.upgrading=!1}async startUpgrade(){this.upgrading=!0
try{await this.repoAjax("/admin/docker/upgrade",{dataType:"text",type:"POST"})}catch(e){this.upgrading=!1}}},a=k(n.prototype,"unloaded",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),o=k(n.prototype,"checking",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=k(n.prototype,"lastCheckedAt",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=k(n.prototype,"latest",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new i.TrackedObject({})}}),u=k(n.prototype,"name",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=k(n.prototype,"path",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=k(n.prototype,"branch",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=k(n.prototype,"official",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=k(n.prototype,"fork",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=k(n.prototype,"id",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=k(n.prototype,"version",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=k(n.prototype,"pretty_version",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=k(n.prototype,"url",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=k(n.prototype,"upgrading",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n)
e.default=j})),define("discourse/plugins/docker_manager/discourse/routes/upgrade-index",["exports","@ember/routing/route"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class t extends r.default{model(){return this.modelFor("upgrade")}async loadRepos(e){for(const r of e)await r.findLatest()}setupController(e,r){super.setupController(...arguments),this.loadRepos(r)}}e.default=t})),define("discourse/plugins/docker_manager/discourse/routes/upgrade-processes",["exports","discourse/plugins/docker_manager/discourse/models/process-list","@ember/routing/route","discourse-common/utils/decorators","discourse-common/lib/later","@ember/runloop"],(function(e,r,t,i,n,a){"use strict"
var o
function l(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=typeof e||null===e)return e
var t=e[Symbol.toPrimitive]
if(void 0!==t){var i=t.call(e,r||"default")
if("object"!=typeof i)return i
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string")
return"symbol"==typeof r?r:String(r)}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let s=(o=class extends t.default{constructor(){super(...arguments),l(this,"processes",null),l(this,"refreshTimer",null),l(this,"autoRefresh",!1)}model(){return this.processes=new r.default,this.autoRefresh=!0,this.refresh(),this.processes}deactivate(){this.autoRefresh=!1}async refresh(){this.autoRefresh?(await this.processes.refresh(),this.refreshTimer=(0,n.default)(this.refresh,5e3)):(0,a.cancel)(this.refreshTimer)}},u=o.prototype,d="refresh",c=[i.bind],p=Object.getOwnPropertyDescriptor(o.prototype,"refresh"),g=o.prototype,f={},Object.keys(p).forEach((function(e){f[e]=p[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce((function(e,r){return r(u,d,e)||e}),f),g&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(g):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(u,d,f),f=null),o)
var u,d,c,p,g,f
e.default=s})),define("discourse/plugins/docker_manager/discourse/routes/upgrade-show",["exports","discourse/plugins/docker_manager/discourse/models/repo","@ember/routing/route","@ember/service"],(function(e,r,t,i){"use strict"
var n,a
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let o=(n=class extends t.default{constructor(){var e,r,t,i
super(...arguments),e=this,r="upgradeStore",i=this,(t=a)&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}model(e){return"all"===e.id?r.default.findAll():r.default.find(e.id)}async afterModel(e){if(Array.isArray(e)){const t=await r.default.findLatestAll()
for(const r of t){const t=e.find((e=>e.path===r.path))
if(!t)return
delete r.path
for(const[e,i]of Object.entries(r))t.latest[e]=i}const i=await r.default.findAllProgress(e.filter((e=>!e.upToDate)))
return void this.upgradeStore.reset({consoleOutput:i.logs,progressPercentage:i.percentage,upgradeStatus:i.status,repos:t})}await r.default.findUpgrading(),await e.findLatest()
const t=await e.findProgress()
this.upgradeStore.reset({consoleOutput:t.logs,progressPercentage:t.percentage,upgradeStatus:t.status,repos:[e.id]})}},l=n.prototype,s="upgradeStore",u=[i.inject],d={configurable:!0,enumerable:!0,writable:!0,initializer:null},p={},Object.keys(d).forEach((function(e){p[e]=d[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=u.slice().reverse().reduce((function(e,r){return r(l,s,e)||e}),p),c&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(c):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(l,s,p),p=null),a=p,n)
var l,s,u,d,c,p
e.default=o})),define("discourse/plugins/docker_manager/discourse/routes/upgrade",["exports","@ember/routing/route","discourse-common/utils/decorators","@ember/service","discourse/plugins/docker_manager/discourse/models/repo","I18n"],(function(e,r,t,i,n,a){"use strict"
var o,l,s
function u(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function d(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let c=(o=class extends r.default{constructor(){super(...arguments),u(this,"messageBus",l,this),u(this,"upgradeStore",s,this)}model(){return n.default.findAll()}activate(){this.messageBus.subscribe("/docker/upgrade",this.onUpgradeMessage)}deactivate(){this.messageBus.unsubscribe("/docker/upgrade",this.onUpgradeMessage)}setupController(e,r){const t=r.find((e=>"discourse"===e.id))
"origin/main"===t?.branch&&e.appendBannerHtml(a.default.t("admin.docker.main_branch_warning",{url:"https://meta.discourse.org/t/17014"}))}onUpgradeMessage(e){switch(e.type){case"log":this.upgradeStore.consoleOutput=this.upgradeStore.consoleOutput+e.value+"\n"
break
case"percent":this.upgradeStore.progressPercentage=e.value
break
case"status":this.upgradeStore.upgradeStatus=e.value
const r=this.modelFor("upgrade")
if("complete"===e.value){for(const e of r)e.upgrading&&(e.version=e.latest?.version)
this.session.requiresRefresh=!0}if("complete"===e.value||"failed"===e.value)for(const e of r)e.upgrading=!1}}},l=d(o.prototype,"messageBus",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=d(o.prototype,"upgradeStore",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d(o.prototype,"onUpgradeMessage",[t.bind],Object.getOwnPropertyDescriptor(o.prototype,"onUpgradeMessage"),o.prototype),o)
e.default=c})),define("discourse/plugins/docker_manager/discourse/services/upgrade-store",["exports","@ember/service","@glimmer/tracking"],(function(e,r,t){"use strict"
var i,n,a,o,l
function s(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function u(e,r,t,i,n){var a={}
return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
let d=(i=class extends r.default{constructor(){super(...arguments),s(this,"consoleOutput",n,this),s(this,"progressPercentage",a,this),s(this,"upgradeStatus",o,this),s(this,"repos",l,this)}get running(){return"running"===this.upgradeStatus}reset(){let{consoleOutput:e,progressPercentage:r,upgradeStatus:t,repos:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}
this.consoleOutput=e??"",this.progressPercentage=r??0,this.upgradeStatus=t??null,this.repos=i??[]}},n=u(i.prototype,"consoleOutput",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=u(i.prototype,"progressPercentage",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=u(i.prototype,"upgradeStatus",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u(i.prototype,"repos",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i)
e.default=d})),define("discourse/plugins/docker_manager/discourse/templates/connectors/admin-menu/upgrade-link",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"DzBhMHtI",block:'[[[41,[30,0,["currentUser","admin"]],[[[1,"  "],[8,[39,1],null,[["@route","@label"],["upgrade","admin.docker.upgrade_tab"]],null],[1,"\\n"]],[]],null]],[],false,["if","nav-item"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/connectors/admin-menu/upgrade-link.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/docker_manager/discourse/templates/connectors/admin-upgrade-header/upgrade-header",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"8s3istjp",block:'[[[8,[39,0],null,[["@versionCheck"],[[30,0,["versionCheck"]]]],null]],[],false,["docker-manager/upgrade-notice"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/connectors/admin-upgrade-header/upgrade-header.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/docker_manager/discourse/templates/upgrade-index",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"DLkPlCRJ",block:'[[[10,"h1"],[12],[1,[28,[35,0],["admin.docker.upgrade_title"],null]],[13],[1,"\\n\\n"],[41,[30,0,["outdated"]],[[[1,"  "],[10,"h2"],[12],[1,[28,[35,0],["admin.docker.outdated_image_header"],null]],[13],[1,"\\n  "],[10,2],[12],[1,[28,[35,0],["admin.docker.outdated_image_info"],null]],[13],[1,"\\n\\n"],[1,"  "],[10,"pre"],[12],[1,"    cd /var/discourse\\n    git pull\\n    ./launcher rebuild app\\n  "],[13],[1,"\\n  "],[10,2],[12],[1,"\\n    "],[10,3],[14,6,"https://meta.discourse.org/t/how-do-i-update-my-docker-image-to-latest/23325"],[12],[1,"\\n      "],[1,[28,[35,0],["admin.docker.outdated_image_link"],null]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[11,"button"],[16,"disabled",[30,0,["upgradeAllButtonDisabled"]]],[24,1,"upgrade-all"],[24,0,"btn"],[24,4,"button"],[4,[38,2],["click",[30,0,["upgradeAllButton"]]],null],[12],[1,"\\n"],[41,[30,0,["allUpToDate"]],[[[1,"      "],[1,[28,[35,0],["admin.docker.all_up_to_date"],null]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[35,0],["admin.docker.upgrade_all"],null]],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n\\n  "],[10,"table"],[14,0,"table"],[14,1,"repos"],[12],[1,"\\n    "],[10,"thead"],[12],[1,"\\n      "],[10,"th"],[12],[13],[1,"\\n      "],[10,"th"],[14,5,"width: 50%"],[12],[1,[28,[35,0],["admin.docker.repository"],null]],[13],[1,"\\n      "],[10,"th"],[12],[1,[28,[35,0],["admin.docker.status"],null]],[13],[1,"\\n    "],[13],[1,"\\n    "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["model"]]],null]],null],null,[[[1,"        "],[8,[39,5],null,[["@repo","@upgradingRepo","@managerRepo"],[[30,1],[30,1,["upgrading"]],[30,0,["managerRepo"]]]],null],[1,"\\n"]],[1]],null],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]]]],["repo"],false,["i18n","if","on","each","-track-array","docker-manager/repo-status"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/upgrade-index.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/docker_manager/discourse/templates/upgrade-processes",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"VlJGq8u/",block:'[[[8,[39,0],null,[["@output"],[[33,1,["output"]]]],null]],[],false,["docker-manager/console","model"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/upgrade-processes.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/docker_manager/discourse/templates/upgrade-show",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"hR+DfpZK",block:'[[[10,"h1"],[12],[1,[30,0,["title"]]],[13],[1,"\\n\\n"],[8,[39,0],null,[["@percent"],[[30,0,["upgradeStore","progressPercentage"]]]],null],[1,"\\n\\n"],[41,[30,0,["complete"]],[[[1,"  "],[10,2],[12],[1,[28,[35,2],["admin.docker.upgrade_successful"],null]],[13],[1,"\\n"]],[]],[[[41,[30,0,["failed"]],[[[1,"  "],[10,2],[12],[1,[28,[35,2],["admin.docker.upgrade_error"],null]],[13],[1,"\\n"]],[]],null]],[]]],[1,"\\n"],[41,[30,0,["isUpToDate"]],[[[41,[30,0,["multiUpgrade"]],[[[1,"    "],[10,2],[12],[1,[28,[35,2],["admin.docker.everything_up_to_date"],null]],[13],[1,"\\n"]],[]],[[[1,"    "],[10,2],[12],[1,[28,[35,2],["admin.docker.repo_newest_version"],[["name"],[[30,0,["model","name"]]]]]],[13],[1,"\\n"]],[]]]],[]],[[[1,"  "],[10,0],[14,0,"upgrade-actions"],[12],[1,"\\n    "],[11,"button"],[16,"disabled",[30,0,["upgrading"]]],[24,0,"btn start-upgrade"],[24,4,"button"],[4,[38,3],["click",[30,0,["start"]]],null],[12],[1,"\\n"],[41,[30,0,["upgrading"]],[[[1,"        "],[1,[28,[35,2],["admin.docker.upgrading"],null]],[1,"\\n"]],[]],[[[1,"        "],[1,[28,[35,2],["admin.docker.start_upgrading"],null]],[1,"\\n"]],[]]],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["upgrading"]],[[[1,"      "],[11,"button"],[24,0,"btn unlock"],[24,4,"button"],[4,[38,3],["click",[30,0,["resetUpgrade"]]],null],[12],[1,"\\n        "],[1,[28,[35,2],["admin.docker.reset_upgrade"],null]],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"]],[]]],[1,"\\n"],[8,[39,4],null,[["@output","@followOutput"],[[30,0,["upgradeStore","consoleOutput"]],true]],null]],[],false,["docker-manager/progress-bar","if","i18n","on","docker-manager/console"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/upgrade-show.hbs",isStrictMode:!1})
e.default=t})),define("discourse/plugins/docker_manager/discourse/templates/upgrade",["exports","@ember/template-factory"],(function(e,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
var t=(0,r.createTemplateFactory)({id:"FtkW+50H",block:'[[[10,0],[14,0,"admin-controls"],[12],[1,"\\n  "],[10,"nav"],[12],[1,"\\n    "],[10,"ul"],[14,0,"nav nav-pills"],[12],[1,"\\n      "],[10,"li"],[12],[1,"\\n        "],[8,[39,0],null,[["@route"],["upgrade.index"]],[["default"],[[[[1,"\\n          "],[1,[28,[35,1],["admin.docker.navigation.versions"],null]],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,"li"],[12],[1,"\\n        "],[8,[39,0],null,[["@route"],["upgrade.processes"]],[["default"],[[[[1,"\\n          "],[1,[28,[35,1],["admin.docker.navigation.processes"],null]],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13],[1,"\\n\\n"],[10,0],[14,0,"docker-manager"],[12],[1,"\\n"],[41,[30,0,["showBanner"]],[[[1,"    "],[10,0],[14,1,"banner"],[12],[1,"\\n      "],[10,0],[14,1,"banner-content"],[12],[1,"\\n        "],[10,0],[14,0,"floated-buttons"],[12],[1,"\\n          "],[8,[39,3],null,[["@icon","@action","@class","@title"],["times",[30,0,["dismiss"]],"btn btn-flat close","banner.close"]],null],[1,"\\n        "],[13],[1,"\\n\\n"],[42,[28,[37,5],[[28,[37,5],[[30,0,["banner"]]],null]],null],null,[[[1,"          "],[10,2],[12],[1,[28,[35,6],[[30,1]],null]],[13],[1,"\\n"]],[1]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[1,"\\n  "],[46,[28,[37,8],null,null],null,null,null],[1,"\\n"],[13]],["row"],false,["link-to","i18n","if","d-button","each","-track-array","html-safe","component","-outlet"]]',moduleName:"discourse/plugins/docker_manager/discourse/templates/upgrade.hbs",isStrictMode:!1})
e.default=t}))

//# sourceMappingURL=docker_manager_admin-692973151a20e39fd28578ad23ec047459d6a78b117e737d3c15bc795dd1970c.map
//!

;
